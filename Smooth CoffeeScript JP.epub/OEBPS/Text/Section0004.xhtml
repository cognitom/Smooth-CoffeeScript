<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <style type="text/css">
/*<![CDATA[*/

  @import "http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.css";
  /*]]>*/
  </style>
</head>

<body>
  <p>P8</p>

  <p>以下のCoffeeScriptのスクリーンショットは自己完結型アプリケーションの簡潔さを示しています。ここではCoffeekupでマークアップした独自のHTTP Webサーバで、HTML5のWebページが含まれています。ページには『生命の種子』(“Seed of Life”)の描画をCanvas要素で行なっています。Coffeekupは、140行未満のCoffeeScriptです。フレームワークもJavaScriptも使われていません。純粋で快適です。</p>
  <pre class="prettyprint lang-coffee">require './prelude'
webpage = kup.render
  doctype 5
  html
    head
      meta charset: 'utf-8'
      title 'My drawing | My awesome website'
      style '''
        body {font-family: sans-serif}
        header, nav, section, footer {display: block}
      '''
      coffeescript 
        draw = (ctx, x, y) 
          circle = (ctx, x, y) 
            ctx.beginPath()
            ctx.arc x, y, 100, 0, 2*Math.PI, false
            ctx.stroke()
          ctx.strokeStyle = 'rgba(255,40,20,0.7)'
          circle ctx, x, y
          for angle in [0...2*Math.PI] by 1/3*Math.PI
            circle ctx, x+100*Math.cos(angle),
                        y+100*Math.sin(angle)
            window.onload = 
              canvas = document.getElementById 'drawCanvas'
              context = canvas.getContext '2d'
              draw context, 300, 200
      body 
        header  h1 'Seed of Life'
        canvas id: 'drawCanvas', width: 600, height: 400

  http = require 'http'
  server = http.createServer (req, res) 
    show "#{req.client.remoteAddress} #{req.method} #{req.url}"
    res.writeHead 200, 'Content-Type': 'text/html'
    res.write webpage
    res.end()
  server.listen 3389
  show 'Server running at'
  show server.address()
￼
</pre><script src="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js" type="text/javascript">
</script><script type="text/javascript">






  //<![CDATA[

  function prettify() {
        prettyPrint();
  }
  if (window.addEventListener) {
        window.addEventListener("load", prettify, false);
  } else if (window.attachEvent) {
  window.attachEvent("onload", prettify);
  } else {
  window.onload = prettify;
  }

  //]]>
  </script>
</body>
</html>
